(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(e,c,t){},41:function(e,c,t){},48:function(e,c,t){"use strict";t.r(c);var n=t(1),i=t.n(n),s=t(27),o=t.n(s),a=(t(40),t(25)),r=t(8),j=(t(41),t(50)),d=t(54),l=t(51),b=t(52),u=t(53),O=t(35),h=Object(O.a)("wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl",{path:"/trucks/"});h.on("connect",(function(){console.log("check connection",h.connected)}));var x=h;var p=t(7),m=t.n(p),f=m.a.icon({iconUrl:"https://sunshine-autos.ucoz.com/_ld/0/75951138.png",iconSize:[58,49]}),v=m.a.icon({iconUrl:"https://i.imgur.com/puSMlJB.png",iconSize:[58,49]}),g=new Array;g[0]=f,g[1]=v;var S=m.a.icon({iconUrl:"https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/18e8ade00a66467.png",iconSize:[45,30]}),N=m.a.icon({iconUrl:"https://cdn.picpng.com/flag/flag-icon-flag-icon-destination-53089.png",iconSize:[45,30]}),y=t(0);var C=function(){var e=Object(n.useState)([]),c=Object(r.a)(e,2),t=c[0],i=c[1],s=Object(n.useState)([]),o=Object(r.a)(s,2),O=o[0],h=o[1],p=Object(n.useState)([]),m=Object(r.a)(p,2),f=m[0],v=m[1],C=Object(n.useState)(""),I=Object(r.a)(C,2),F=I[0],k=I[1],T=Object(n.useState)([]),U=Object(r.a)(T,2),z=U[0],A=U[1],E=Object(n.useState)(""),w=Object(r.a)(E,2),D=w[0],M=w[1],K=Object(n.useState)("defaultUser"),R=Object(r.a)(K,2),B=R[0],H=R[1];return Object(n.useEffect)((function(){return x.emit("TRUCKS"),x.emit("CHAT"),x.on("TRUCKS",(function(e){h(e)})),x.on("FAILURE",(function(e){e.source="Falla de ".concat(e.source);var c=f.find((function(c){return c.code===e.code}));if("undefined"!==typeof c){var t=f;t[t.indexOf(c)]=e,v(t)}else v([].concat(Object(a.a)(f),[e]))})),x.on("CHAT",(function(e){A([].concat(Object(a.a)(z),[e]))})),x.on("FIX",(function(e){var c={code:e.code,source:"OK"},t=f.find((function(c){return c.code===e.code})),n=f;n[f.indexOf(t)]=c,v(n)})),x.on("POSITION",(function(e){var c,n,s={code:e.code,position:e.position,iconInt:(c=0,n=2,Math.floor(Math.random()*(n-c))+c)},o={code:e.code,source:"OK"},r=t.find((function(e){return e.code===s.code}));if("undefined"!==typeof r){var j=t;j[j.indexOf(r)]=s,i(j)}else v([].concat(Object(a.a)(f),[o])),i([].concat(Object(a.a)(t),[s]))})),function(){x.off()}}),[t,O]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"overall",children:[Object(y.jsxs)("div",{className:"map-chat",children:[Object(y.jsx)("div",{className:"map",children:Object(y.jsxs)(j.a,{center:[-22,-68.5],zoom:10,scrollWheelZoom:!0,children:[Object(y.jsx)(d.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map((function(e){return Object(y.jsx)(l.a,{position:[e.position[0],e.position[1]],icon:g[e.iconInt],children:Object(y.jsx)(b.a,{children:e.code})})})),O.map((function(e){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(u.a,{positions:[[e.origin[0],e.origin[1]],[e.destination[0],e.destination[1]]]}),Object(y.jsxs)(l.a,{position:[e.origin[0],e.origin[1]],icon:S,children:[" ",Object(y.jsxs)(b.a,{children:[" ",e.code," "]})," "]}),Object(y.jsxs)(l.a,{position:[e.destination[0],e.destination[1]],icon:N,children:[" ",Object(y.jsx)(b.a,{children:e.code})]})]})}))]})}),Object(y.jsxs)("div",{className:"chat-box",children:[Object(y.jsx)("p",{className:"p1",children:" Chat "}),Object(y.jsx)("br",{}),Object(y.jsx)("p",{children:" Nombre de usuario: "}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),H(B)},children:[Object(y.jsx)("input",{type:"text",value:B,placeholder:"Username",onChange:function(e){return H(e.target.value)}}),Object(y.jsx)("button",{type:"submit",children:" Cambiar "})]}),Object(y.jsx)("div",{className:"chat-container",children:z.map((function(e){return Object(y.jsxs)("div",{className:"msj-container",children:[Object(y.jsx)("div",{children:Object(y.jsxs)("p",{className:"user-name",children:[" ",e.name," "]})}),Object(y.jsxs)("div",{className:"msj-text",children:[Object(y.jsxs)("h3",{children:[e.message," "]}),Object(y.jsxs)("p",{children:[" Date: ",e.date," "]}),Object(y.jsx)("br",{})]})]})}))}),Object(y.jsx)("br",{}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){var e={message:D,name:B};x.emit("CHAT",e),M("")}()},children:[Object(y.jsx)("input",{type:"text",value:D,placeholder:"Ingresa un mensaje",onChange:function(e){return M(e.target.value)}}),Object(y.jsx)("button",{type:"submit",children:" ENVIAR "})]})]})]}),Object(y.jsxs)("div",{className:"infobox",children:[Object(y.jsx)("p",{className:"p1",children:" Informaci\xf3n de los camiones"}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"card-container",children:O.map((function(e){var c;return Object(y.jsxs)("div",{className:"card",children:[Object(y.jsx)("div",{className:"card-title",children:Object(y.jsxs)("h1",{children:[" Codigo: ",e.code]})}),Object(y.jsxs)("div",{className:"truckinfo-text",children:[Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Truck: ",e.truck]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Engine: ",e.engine]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Capacidad: ",e.capacity]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" Origen: ",e.origin]})}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"Destino: "}),Object(y.jsxs)("h3",{children:[" ",e.destination]})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("h3",{children:[" Estatus: ",null===(c=f.find((function(c){return c.code===e.code})))||void 0===c?void 0:c.source]}),Object(y.jsx)("form",{onSubmit:function(c){k(e.code),x.emit("FIX",{code:F})},children:Object(y.jsx)("button",{type:"submit",children:" FIX "})})]}),Object(y.jsx)("h2",{children:" Operadores"}),e.staff.map((function(e){return Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{children:[" ",e.name,", ",e.age," a\xf1os"]})})}))]})]})}))})]})]})})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,55)).then((function(c){var t=c.getCLS,n=c.getFID,i=c.getFCP,s=c.getLCP,o=c.getTTFB;t(e),n(e),i(e),s(e),o(e)}))};o.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(C,{})}),document.getElementById("root")),I()}},[[48,1,2]]]);
//# sourceMappingURL=main.90c48956.chunk.js.map